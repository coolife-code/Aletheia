# Aletheia - AI 舆情谎言鉴定系统架构

## 1. 系统概述

**项目名称**: Aletheia (希腊语"真理")  
**定位**: 基于多 Agent 协作的舆情内容真实性鉴定平台  
**核心能力**: 文本/图片/视频内容的事实核查、可信度评分、证据溯源

---

## 2. 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                      Web Frontend                            │
│              Next.js 14 + Tailwind + shadcn/ui              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      API Gateway                             │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    Backend (FastAPI)                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 用户服务  │  │ 任务调度  │  │ 内容分析  │  │ 报告生成  │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                  Agent Orchestrator                          │
│              (Pipeline: Parser → Search → Verdict)           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ┌─────────────────┐    ┌─────────────────┐    ┌──────────┐ │
│  │  解析预处理Agent  │───→│    搜索Agent     │───→│ 鉴定结论Agent│ │
│  │ (Parser Agent)  │    │ (Search Agent)  │    │(Verdict) │ │
│  │ 提取核心信息+标准化 │    │ 全网检索+信源评估  │    │交叉验证+出结论│ │
│  └─────────────────┘    └─────────────────┘    └──────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    LLM / Search / Vector DB                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 技术栈

| 层级 | 技术 |
|------|------|
| 前端 | Next.js 14, TypeScript, Tailwind CSS, shadcn/ui, Zustand |
| 后端 | FastAPI, Python 3.11+, SQLAlchemy, Celery |
| 数据库 | PostgreSQL 15, Redis 7, Milvus, Elasticsearch |
| AI | OpenAI/Claude API, LangChain, Sentence Transformers |
| 部署 | Docker, Kubernetes, Nginx |

---

## 4. 项目结构

```
aletheia/
├── frontend/                   # Next.js 前端
│   ├── app/                    # App Router
│   ├── components/             # React 组件
│   ├── stores/                 # Zustand 状态
│   └── lib/                    # 工具函数
├── backend/                    # FastAPI 后端
│   ├── app/
│   │   ├── api/                # API 路由
│   │   ├── models/             # 数据模型
│   │   ├── services/           # 业务逻辑
│   │   ├── agents/             # Agent 系统
│   │   └── tasks/              # Celery 任务
│   └── tests/
├── docker-compose.yml
└── README.md
```

---

## 5. Agent 系统

### 5.1 解析预处理 Agent (Parser Agent)
**职责**: 提取舆情核心信息并标准化

**核心功能**:
- 内容类型识别（文本/图片/视频/混合）
- 关键主张提取与结构化
- 舆情要素解析（主体、事件、时间、地点）
- 生成标准化检索指令
- 输出结构化任务包

**输出**:
```json
{
  "task_id": "uuid",
  "content_summary": "核心主张摘要",
  "key_claims": ["主张1", "主张2"],
  "search_queries": ["检索指令1", "检索指令2"],
  "metadata": { "source_type": "", "timestamp": "" }
}
```

### 5.2 搜索 Agent (Search Agent)
**职责**: 执行定制化全网检索，回传结构化权威信源数据

**核心功能**:
- 多源并行检索（新闻、学术、政府、社交媒体）
- 信源可信度预评估
- 信息去重与相关性排序
- 结构化数据抽取
- 检索结果缓存与溯源

**输出**:
```json
{
  "search_id": "uuid",
  "query_sources": [
    {
      "source_url": "",
      "source_credibility": "high|medium|low",
      "publish_time": "",
      "content_snippet": "",
      "relevance_score": 0.95,
      "evidence_type": "primary|secondary"
    }
  ],
  "search_metadata": { "coverage": "", "completeness": "" }
}
```

### 5.3 鉴定结论 Agent (Verdict Agent)
**职责**: 基于检索结果做逻辑分析+交叉验证，生成带溯源证据的鉴定结论

**核心功能**:
- 多源证据交叉验证
- 逻辑一致性分析
- 可信度综合评分
- 鉴定结论生成（真实/虚假/存疑/无法核实）
- 完整证据链组装
- 可复现报告输出

**输出**:
```json
{
  "verdict_id": "uuid",
  "conclusion": "true|false|uncertain|unverifiable",
  "confidence_score": 0.92,
  "reasoning_chain": ["推理步骤1", "推理步骤2"],
  "evidence_chain": [
    {
      "evidence_id": "",
      "source_ref": "search_id",
      "supports": true,
      "weight": 0.8
    }
  ],
  "traceability_log": { "agent_actions": [], "decision_points": [] }
}
```

### 5.4 Agent 协作流程

```
用户输入内容
      │
      ▼
┌─────────────────┐
│  解析预处理Agent  │ ← 提取核心信息并标准化
│  (Parser Agent)  │
└─────────────────┘
      │
      ▼ 下达精准检索指令
┌─────────────────┐
│    搜索Agent     │ ← 执行定制化全网检索
│  (Search Agent)  │
└─────────────────┘
      │
      ▼ 回传结构化权威信源数据
┌─────────────────┐
│   鉴定结论Agent   │ ← 逻辑分析+交叉验证
│ (Verdict Agent)  │
└─────────────────┘
      │
      ▼
生成带溯源证据的鉴定结论（全程可追溯、可复现）
```

### 5.5 数据流转规范

| 阶段 | 输入 | 处理 | 输出 | 可追溯点 |
|------|------|------|------|----------|
| 解析预处理 | 原始舆情内容 | 结构化提取 | 检索任务包 | 解析日志、提取规则版本 |
| 搜索 | 检索指令 | 多源检索 | 证据数据集 | 检索时间、来源URL、原始快照 |
| 鉴定结论 | 证据数据集 | 逻辑验证 | 鉴定报告 | 推理链、证据权重、决策依据 |

---

## 6. 数据模型

```python
# 核心实体
AnalysisTask    # 分析任务
├── content     # 待分析内容
├── status      # 任务状态
├── credibility_score  # 可信度评分 0-100
└── findings    # 发现项列表

Finding         # 发现项
├── agent_type  # Agent 类型
├── claim       # 主张
├── assessment  # 评估结果
└── confidence  # 置信度

Evidence        # 证据
├── source      # 来源
├── content     # 内容
└── credibility # 可信度
```

---

## 7. 核心流程

```
用户输入 → 内容预处理 → Agent 执行 → 结果聚合 → 报告生成
              │              
              ▼              
         类型识别     
         文本提取    
```

---

## 8. 开发路线

| 阶段 | 周期 | 目标 |
|------|------|------|
| MVP | 4周 | 基础界面 + 事实核查 Agent |
| 核心 | 4周 | 三 Agent 完整功能 |
| 增强 | 4周 | 多模态 + 实时分析 |
| 生产 | 4周 | 测试 + 监控 + 文档 |

---

## 9. 风险与应对

| 风险 | 应对 |
|------|------|
| LLM 延迟/不可用 | 超时重试、本地模型降级 |
| 幻觉问题 | RAG 增强、多 Agent 交叉验证 |
| 成本过高 | 缓存优化、模型路由 |
| 数据隐私 | 敏感信息脱敏、本地化处理 |
